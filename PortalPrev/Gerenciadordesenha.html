<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador de Senhas</title>
    <style>

    body {
    font-family: 'Roboto', sans-serif;
    margin: 10px;
    text-align: center;
    font-size: 14px; 
    background: linear-gradient(135deg, #FF4500, #FF8C00, #FFA500);
    color: #000000;

        }
/* TEXTO NOME DA FERRAMENTA */
.textotitulos {
    font-family: 'Raleway', sans-serif;
    font-size: 70px;
    font-weight: bold;
    text-align: center;
    color: #ffffff;
    text-shadow: 
        2px 2px 5px rgba(0, 0, 0, 0.5), 
        4px 4px 10px rgba(0, 0, 0, 0.4), 
        6px 6px 15px rgba(0, 0, 0, 0.3),
        8px 8px 20px rgba(0, 0, 0, 0.2);
    margin-top: 50px;
}
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
        }
        form {
            margin-bottom: 20px;
        }
        input[type="text"], input[type="password"], textarea {
            width: calc(100% - 22px);
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #3498db;
            border-radius: 5px;
         }
        .system-link {
            display: block;
            margin-bottom: 10px;
            padding: 10px;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            text-align: center;
        }
        .system-link:hover {
            background-color: #0056b3;
        }
        .system-link.selected {
            background-color: #696969;
            color: #000;
        }
        .edit-section {
            display: none;
            background-color: #e9ecef;
            padding: 15px;
            margin-top: 10px;
            border-radius: 5px;
        }
        .edit-section input, .edit-section textarea {
            margin-bottom: 10px;
        }
        .button-group {

       }
        button {  /* BOTÃO SALVAR*/

    background-color: #32cd32;
    color: white; /* Cor da fonte é branca aqui também */
    padding: 2px 5px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.4);
    transition: all 0.1s;
    height: auto;
    line-height: normal;
        }
        button:hover {
    background: #006400;
    transform: scale(1.1); /* Aumenta o tamanho do botão ao passar o mouse */
    box-shadow: 0 6px 18px rgba(0, 153, 255, 0.6); /* Aumenta o efeito de sombra ao passar o mouse */

        }

        .copy-btn {   /* BOTÃO COPIAR CAMPOS*/
    background-color: #0070D2;
    padding: 2px 5px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.4);
    transition: all 0.1s;
    height: auto;
    line-height: normal;
    margin: 0 10px; /* 10px à esquerda e à direita dos botões */
    margin-bottom: 10px; /* Espaço abaixo do contêiner */
        }
        .copy-btn:hover {
        background-color: #0000CD;
        }
        .delete-btn {  /* BOTÃO EXCLUIR SISTEMA*/
        background-color: #dc3545;
        padding: 2px 5px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.4);
        transition: all 0.1s;
        height: auto;
        line-height: normal;
        margin: 0 10px; /* 10px à esquerda e à direita dos botões */
        }
        .delete-btn:hover {
            background-color: #c82333;
        }
        .toggle-btn {    /* BOTÃO MOSTRAR CAMPO OCULTO*/
        background-color: #696969;
        padding: 2px 5px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.4);
        transition: all 0.1s;
        height: auto;
        line-height: normal;
        margin-bottom: 10px; /* Espaço abaixo do contêiner */

        }
        .toggle-btn:hover {
            background-color: #a9a9a9;
        }
        .backup-btn {   /* BOTÃO BACKUP*/
    background-color: #0070D2;
    padding: 2px 5px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.4);
    transition: all 0.1s;
    height: auto;
    line-height: normal;
    margin: 0 10px; /* 10px à esquerda e à direita dos botões */
    margin-top: 10px;
        }
        .backup-btn:hover {
            background-color: #0000CD;
        }

    .buttoninicial {
    background: #003366;
    color: white;
    border: none;
    padding: 10px 20px; /* Ajustado para um tamanho ideal */
    border-radius: 20px; /* Arredondamento mais sutil */
    cursor: pointer;
    font-size: 1em; /* Tamanho de fonte menor */
    box-shadow: 0 4px 12px rgba(0, 153, 255, 0.4); /* Efeito de sombra mais leve */
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
    margin: 10px 5px; /* Ajustado para melhorar o espaçamento entre os botões */
    text-align: center; /* Alinha o texto no centro */
    width: 120px; /* Aumente a largura se necessário */
    margin: 0 auto; /* Centraliza horizontalmente */
    margin-bottom: 20px; /* Adiciona espaço abaixo do botão */
    margin-top: -30px; /* Reduz o espaço acima do botão */
    white-space: nowrap; /* Impede quebra de linha */

    }
    .buttoninicial:hover {
    background: #0000FF;
    transform: scale(1.1); /* Aumenta o tamanho do botão ao passar o mouse */
    box-shadow: 0 6px 18px rgba(0, 153, 255, 0.6); /* Aumenta o efeito de sombra ao passar o mouse */
    }
    .buttoninicial:active {
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);
    transform: translate(2px, 2px);
    }

    .imagemsenha img {
    width: 8%; /* Ajuste o tamanho da imagem */
    height: auto; /* Mantém a proporção da imagem */
    display: block;
    margin-left: 83%; /* Ajuste centralização da imagem */
    margin-top: 1%; /* Ajuste de altura da imagem */			
    margin-right: auto;
    margin-bottom: -30%; /* Ajuste de espaçamento embaixo */
    filter: brightness(50%); /* Escurece a imagem */		
    }

    .imagem-logowiz img {
    width: 30%; /* Ajuste o tamanho da imagem */
    height: auto; /* Mantém a proporção da imagem */
    display: block;
    margin-left: -2%; /* Ajuste centralização da imagem */
    margin-top: 15%; /* Ajuste de altura da imagem */			
    margin-right: auto;
    margin-bottom: -15%; /* Ajuste de espaçamento embaixo */
    filter: brightness(20%); /* Escurece a imagem */	
    }

    </style>
</head>
<body>

          <div class="imagemsenha img">
          <div class="imagemsenha">
          <img src="https://makelo19.github.io/PortalPrev/Imagens/imagemsenha.png" alt="imagemsenha">
          </div>
          <div class="imagem-logowiz">
          <img src="https://makelo19.github.io/PortalPrev/Imagens/Wiz-Concept-Logo-Negativo-Fundo-Cinza.png" alt="Logo WizCo">
          </div>

  <h1 class="textotitulos";>Minhas Senhas</h1> 

    <div class="container">
        <h1>Gerenciador de Senhas</h1>
        <form id="passwordForm">
            <input type="text" id="systemName" placeholder="Nome do Sistema" required>
            <input type="text" id="username" placeholder="Nome de Usuário" required>
            <div class="button-group">
                <input type="password" id="password" placeholder="Senha" required>
                <button type="button" class="toggle-btn" onclick="togglePassword('password', this)">Mostrar Senha</button>
            </div>
            <textarea id="notes" placeholder="Observações" rows="4"></textarea>
            <button type="submit">Salvar Senha</button>
        </form>
        <div id="systemList"></div>
        <div class="edit-section" id="editSection">
            <div class="button-group">
                <input type="text" id="editUsername" placeholder="Nome de Usuário">
                <button class="copy-btn" onclick="copyToClipboard('editUsername', this)">Copiar Usuário</button>
            </div>
            <div class="button-group">
                <input type="password" id="editPassword" placeholder="Senha">
                <button class="toggle-btn" onclick="togglePassword('editPassword', this)">Mostrar Senha</button>
                <button class="copy-btn" onclick="copyPassword('editPassword', this)">Copiar Senha</button>
            </div>
            <div class="button-group">
                <textarea id="editNotes" placeholder="Observações" rows="4"></textarea>
                <button class="copy-btn" onclick="copyToClipboard('editNotes', this)">Copiar Observações</button>
                <button id="copyAllBtn" class="copy-btn" onclick="copyAllDetails(this)">Copiar Tudo</button>

            </div>

        </div>
            <button class="delete-btn" onclick="confirmDelete()">Excluir Sistema Selecionado</button>
            <button class="backup-btn" onclick="backupPasswords()">Fazer Backup das Senhas</button> 
            <button id="saveEditBtn">Salvar Alterações</button>

    </div>

    <script>
        let currentEditIndex = null;
        let selectedLink = null;

        // Função para salvar a senha no localStorage
        function savePassword(event) {
            event.preventDefault();
            
            const systemName = document.getElementById('systemName').value;
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const notes = document.getElementById('notes').value;

            const passwordData = {
                systemName,
                username,
                password,
                notes
            };

            let passwords = JSON.parse(localStorage.getItem('passwords')) || [];
            passwords.push(passwordData);
            localStorage.setItem('passwords', JSON.stringify(passwords));

            document.getElementById('passwordForm').reset();
            displaySystems();
        }

        // Função para exibir os links dos sistemas salvos
        function displaySystems() {
            const systemList = document.getElementById('systemList');
            const passwords = JSON.parse(localStorage.getItem('passwords')) || [];
            
            systemList.innerHTML = '';

            passwords.forEach((passwordItem, index) => {
                const link = document.createElement('a');
                link.classList.add('system-link');
                link.textContent = passwordItem.systemName;
                link.href = '#';
                link.onclick = function() {
                    showEditSection(index, link);
                };
                systemList.appendChild(link);
            });
        }

        // Função para mostrar a seção de edição de um sistema específico e destacar o link
        function showEditSection(index, link) {
            const passwords = JSON.parse(localStorage.getItem('passwords')) || [];
            const passwordItem = passwords[index];

            currentEditIndex = index;
            document.getElementById('editUsername').value = passwordItem.username;
            document.getElementById('editPassword').value = passwordItem.password;
            document.getElementById('editNotes').value = passwordItem.notes;

            document.getElementById('editSection').style.display = 'block';

            // Remover destaque anterior e adicionar ao atual
            if (selectedLink) {
                selectedLink.classList.remove('selected');
            }
            link.classList.add('selected');
            selectedLink = link;
        }

        // Função para salvar as alterações feitas em um sistema
        function saveEdit() {
            const passwords = JSON.parse(localStorage.getItem('passwords')) || [];
            if (currentEditIndex !== null) {
                passwords[currentEditIndex].username = document.getElementById('editUsername').value;
                passwords[currentEditIndex].password = document.getElementById('editPassword').value;
                passwords[currentEditIndex].notes = document.getElementById('editNotes').value;
                
                localStorage.setItem('passwords', JSON.stringify(passwords));
                displaySystems();
                document.getElementById('editSection').style.display = 'none';
            }
        }

        // Função para copiar o conteúdo do campo para a área de transferência
        function copyToClipboard(elementId, button) {
            const copyText = document.getElementById(elementId);
            copyText.select();
            document.execCommand("copy");

            // Mudar a cor do último botão clicado
            const buttons = document.querySelectorAll('.copy-btn');
            buttons.forEach(btn => btn.style.backgroundColor = '#007bff'); // Reseta a cor dos outros botões
            button.style.backgroundColor = '#0056b3'; // Muda a cor do botão clicado
        }

        // Função para copiar a senha, mesmo que esteja oculta
        function copyPassword(inputId, button) {
            const input = document.getElementById(inputId);
            const passwordValue = input.value;

            // Copiar a senha diretamente
            navigator.clipboard.writeText(passwordValue).then(() => {
                // Mudar a cor do botão clicado
                const buttons = document.querySelectorAll('.copy-btn');
                buttons.forEach(btn => btn.style.backgroundColor = '#007bff'); // Reseta a cor dos outros botões
                button.style.backgroundColor = '#0056b3'; // Muda a cor do botão clicado
            });
        }

        // Função para copiar todos os detalhes do sistema
        function copyAllDetails(button) {
            const passwords = JSON.parse(localStorage.getItem('passwords')) || [];
            if (currentEditIndex !== null) {
                const passwordItem = passwords[currentEditIndex];
                const details = `Sistema: ${passwordItem.systemName}\nUsuário: ${passwordItem.username}\nSenha: ${passwordItem.password}\nObservações: ${passwordItem.notes}`;
                navigator.clipboard.writeText(details);
                // Mudar a cor do botão clicado
                const buttons = document.querySelectorAll('.copy-btn');
                buttons.forEach(btn => btn.style.backgroundColor = '#007bff'); // Reseta a cor dos outros botões
                button.style.backgroundColor = '#0056b3'; // Muda a cor do botão clicado
            }
        }

        // Função para excluir um sistema
        function confirmDelete() {
            if (confirm('Tem certeza que deseja excluir este sistema?')) {
                const passwords = JSON.parse(localStorage.getItem('passwords')) || [];
                passwords.splice(currentEditIndex, 1);
                localStorage.setItem('passwords', JSON.stringify(passwords));
                displaySystems();
                document.getElementById('editSection').style.display = 'none';
                alert('Sistema excluído com sucesso!');
            }
        }

        // Função para mostrar/ocultar a senha
        function togglePassword(inputId, button) {
            const input = document.getElementById(inputId);
            const isPasswordType = input.type === 'password';

            input.type = isPasswordType ? 'text' : 'password';
            button.textContent = isPasswordType ? 'Ocultar Senha' : 'Mostrar Senha';
        }

        // Função para fazer backup das senhas em um arquivo .txt
        function backupPasswords() {
            const passwords = JSON.parse(localStorage.getItem('passwords')) || [];
            let backupContent = 'Backup de Senhas:\n\n';

            passwords.forEach(item => {
                backupContent += `Sistema: ${item.systemName}\nUsuário: ${item.username}\nSenha: ${item.password}\nObservações: ${item.notes}\n\n`;
            });

            const blob = new Blob([backupContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'backup_senhas.txt';
            a.click();
            URL.revokeObjectURL(url);
            alert('Backup realizado com sucesso!');
        }

        // Adicionar eventos
        document.getElementById('passwordForm').addEventListener('submit', savePassword);
        document.getElementById('saveEditBtn').addEventListener('click', saveEdit);

        // Inicializar a exibição dos sistemas
        displaySystems();
    </script>
</body>
</html>
